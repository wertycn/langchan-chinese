---
sidebar_position: 4
---
# 代理人

一些应用程序需要根据用户输入对LLM和其他工具进行灵活的调用链。**代理人**接口为这类应用程序提供了灵活性。代理人可以访问一组工具，并根据用户输入决定使用哪些工具。代理人可以使用多个工具，并将一个工具的输出作为下一个工具的输入。

代理人有两种主要类型：

- **动作代理**: 在每个时间步骤上，使用所有先前动作的输出决定下一个动作
- **规划和执行代理**: 提前决定完整的动作序列，然后执行所有动作而不更新计划

行动代理适用于小型任务，而计划执行代理则更适用于复杂或长时间运行的任务，这些任务需要维护长期目标和专注力。通常，最好的方法是将行动代理的动态性与计划执行代理的规划能力相结合，让计划执行代理使用行动代理来执行计划。

有关代理类型的完整列表，请参见[代理类型](/docs/modules/agents/agent_types/)。与代理相关的其他抽象包括：
- [**工具**](/docs/modules/agents/tools/)：代理可以执行的操作。您提供给代理的工具取决于您希望代理执行的任务。
- [**工具包**](/docs/modules/agents/toolkits/)：对一组可以一起使用的工具进行封装的包装器，用于特定的用例。例如，为了使代理能够
  ## 操作代理

在高层次上，一个操作代理:
1. 接收用户输入
2. 决定是否需要使用工具以及工具的输入
3. 调用工具并记录输出（也称为“观察”）
4. 使用工具、工具输入和观察的历史记录来决定下一步
5. 重复步骤3-4，直到确定可以直接回复给用户

动作代理被封装在**代理执行器**中，代理执行器负责调用代理，获取动作和动作输入，使用生成的输入调用动作引用的工具，获取工具的输出，然后将所有这些信息传递回代理，以获取应该执行的下一个动作。

虽然代理可以以多种方式构建，但通常涉及以下组件：

- **提示模板**：负责接收用户输入和之前的步骤，并构建一个发送给语言模型的提示。
- **语言模型**：接收带有用户输入和操作历史的提示，并决定下一步该做什么。
- **输出解析器**：将语言模型的输出解析为下一个操作或最终答案。

## 计划和执行代理

在高层次上，计划和执行代理：
1. 接收用户输入
2. 规划要执行的完整步骤
3. 按顺序执行步骤，将过去步骤的输出作为未来步骤的输入

最典型的实现方式是将计划者作为语言模型，执行者作为行动代理。[在这里](/docs/modules/agents/agent_types/plan_and_execute.html)阅读更多。

## 入门指南

import GetStarted from "@snippets/modules/agents/get_started.mdx"

<GetStarted/>
